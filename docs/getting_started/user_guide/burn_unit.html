
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Burn unit and wind direction &#8212; DripTorch 0.6.3 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Igniters and ignition crews" href="personnel.html" />
    <link rel="prev" title="User Guide" href="index.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    <img src="../../_static/logo.svg" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/logo.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../index.html">
  Home
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../reference/index.html">
  Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/silvxlabs/driptorch" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   User Guide
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Burn unit and wind direction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="personnel.html">
     Igniters and ignition crews
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="firing.html">
     Firing techniques (pattern generators)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mapping.html">
     Mapping
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="exporting.html">
     Exports
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#control-line-and-downwind-blackline-buffering">
   Control line and downwind blackline buffering
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="burn-unit-and-wind-direction">
<h1>Burn unit and wind direction<a class="headerlink" href="#burn-unit-and-wind-direction" title="Permalink to this headline">#</a></h1>
<p>A burn unit is the spatial boundary of a firing operation while the wind direction determines the arrangement and timing of the ignition pattern. Everything that happens downstream in DripTorch depends on the unit boundary and the wind direction.</p>
<p>You can create a burn unit in DripTorch by providing a Shapely <code class="docutils literal notranslate"><span class="pre">Polygon</span></code> object to the <code class="docutils literal notranslate"><span class="pre">BurnUnit</span></code> constructor. DripTorch expects the polygon CRS to be Web Mercator (EPSG: 4326). You can use the following function to convert any Shapely geometry or GeoJSON dictionary from a specific EPSG code to 4326.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">driptorch</span> <span class="k">as</span> <span class="nn">dt</span>

<span class="c1"># Reproject a shapely polygon to 4326</span>
<span class="n">polygon_wm</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">Projector</span><span class="o">.</span><span class="n">to_web_mercator</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="mi">5070</span><span class="p">)</span>

<span class="c1"># Reproject a GeoJSON feature to 4326 (This won&#39;t work on Feature Collections, first you need to extract a feature from the feature list)</span>
<span class="n">feature_wm</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">Projector</span><span class="o">.</span><span class="n">to_web_mercator</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="mi">5070</span><span class="p">)</span>
</pre></div>
</div>
<p>Internally, DripTorch will convert the 4326-projected spatial data to the appropriate UTM projection. The UTM EPSG code will be passed down to child objects of the burn unit and used to project the data back to 4326 when exporting.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Polygon</span>

<span class="c1"># Create a shapely Polygon object</span>
<span class="n">polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mf">114.44869995117188</span><span class="p">,</span> <span class="mf">47.088504171925706</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.44470882415771</span><span class="p">,</span> <span class="mf">47.08745225315146</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.44342136383057</span><span class="p">,</span> <span class="mf">47.09066638416644</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.44496631622313</span><span class="p">,</span> <span class="mf">47.09236102969754</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.44633960723877</span><span class="p">,</span> <span class="mf">47.0924194647886</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.45281982421875</span><span class="p">,</span> <span class="mf">47.089205439567344</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.45153236389159</span><span class="p">,</span> <span class="mf">47.08815353464254</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">114.44869995117188</span><span class="p">,</span> <span class="mf">47.088504171925706</span><span class="p">)])</span>

<span class="c1"># Create a burn unit with a wind direction of 90 degrees</span>
<span class="n">burn_unit</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">BurnUnit</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>

<span class="c1"># If your polygon is already in UTM, then you&#39;ll need to specifiy the UTM EPSG code in the contructor</span>
<span class="n">burn_unit</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">BurnUnit</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="n">utm_epsg</span><span class="o">=</span><span class="mi">32611</span><span class="p">)</span>
</pre></div>
</div>
<p>If your spatial data is formatted in GeoJSON then use the <code class="docutils literal notranslate"><span class="pre">from_json()</span></code> alternative constructor. DripTorch will look through the list of features and extract the first instance of a polygon geometry. <a class="reference external" href="https://geojson.io">geojon.io</a> is a great web application for creating GeoJSONs. The GeoJSON doesn’t have to be a Feature Collection. DripTorch will accept Feature types as well.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define GeoJSON feature collection</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span><span class="s2">&quot;features&quot;</span><span class="p">:[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span><span class="s2">&quot;properties&quot;</span><span class="p">:{},</span><span class="s2">&quot;geometry&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span><span class="s2">&quot;coordinates&quot;</span><span class="p">:[[[</span><span class="o">-</span><span class="mf">114.44869995117188</span><span class="p">,</span><span class="mf">47.088504171925706</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.44470882415771</span><span class="p">,</span><span class="mf">47.08745225315146</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.44342136383057</span><span class="p">,</span><span class="mf">47.09066638416644</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.44496631622313</span><span class="p">,</span><span class="mf">47.09236102969754</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.44633960723877</span><span class="p">,</span><span class="mf">47.0924194647886</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.45281982421875</span><span class="p">,</span><span class="mf">47.089205439567344</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.45153236389159</span><span class="p">,</span><span class="mf">47.08815353464254</span><span class="p">],[</span><span class="o">-</span><span class="mf">114.44869995117188</span><span class="p">,</span><span class="mf">47.088504171925706</span><span class="p">]]]}}]}</span>


<span class="c1"># Create a burn unit from a GeoJSON feature collection with a wind direction of 217 degrees</span>
<span class="n">burn_unit</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">BurnUnit</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="mi">217</span><span class="p">)</span>
</pre></div>
</div>
<section id="control-line-and-downwind-blackline-buffering">
<h2>Control line and downwind blackline buffering<a class="headerlink" href="#control-line-and-downwind-blackline-buffering" title="Permalink to this headline">#</a></h2>
<p>You can emmulate a plowline or handline operation by buffering the burn unit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Buffer the burn unit to inside a control line of 2 meters</span>
<span class="n">firing_area</span> <span class="o">=</span> <span class="n">burn_unit</span><span class="o">.</span><span class="n">buffer_control_line</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also simulate the blackline operation which only buffers the downwind side of the unit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an additional 10 meter buffer in the firing_area object on the downwind side of the unit</span>
<span class="n">firing_area</span> <span class="o">=</span> <span class="n">firing_area</span><span class="o">.</span><span class="n">buffer_downwind</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>The difference between the <code class="docutils literal notranslate"><span class="pre">burn_unit</span></code> and <code class="docutils literal notranslate"><span class="pre">firing_area</span></code> can be computed for removing fuels prior to running a fire simulation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fuel_removal_area</span> <span class="o">=</span> <span class="n">burn_unit</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">firing_area</span><span class="p">)</span>
</pre></div>
</div>
<p>And you can write the <code class="docutils literal notranslate"><span class="pre">BurnUnit</span></code> object back to GeoJSON for use in other applications.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write a GeoJSON in the default projection (EPSG: 4326)</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="n">fuel_removal_area</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="c1"># Write a GeoJSON projected in Albers Equal Area Conic (EPSG: 5070)</span>
<span class="n">geojson</span> <span class="o">=</span> <span class="n">burn_unit</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">dst_epsg</span><span class="o">=</span><span class="mi">5070</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>Note: DripTorch caches the source EPSG code when loading a geometry, whether you specified it manual or left it as the default (4326). Everything under the hood operates in UTM, however when you export to GeoJSON DripTorch will always convert the coordinates to 4326. For other types of exports, such as exports to fire model ignition files, the projection will stay in UTM if you don’t specify a destination CRS.</p>
</div></blockquote>
<p>Buffering the burn unit to account for the control line and blackline operation is optional. Just remember that the <code class="docutils literal notranslate"><span class="pre">BurnUnit</span></code> instance you pass to the built-in pattern ignition generators (discussed below) determines the where the ignition paths are clipped. So, if you create an interior firing area polygon by buffering the original burn unit, what we called <code class="docutils literal notranslate"><span class="pre">firing_area</span></code> above, be sure to pass that polygon to downstream operations in DripTorch if you don’t want ignitions in your control line or blackline area.</p>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="index.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">User Guide</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="personnel.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Igniters and ignition crews</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, Silvx Labs LLC.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>